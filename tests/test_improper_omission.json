{
    "name": "ImproperOmissionRule Tests",
    "description": "Tests para verificar detección de omisión impropia de factores (3ª, 7ª)",
    "rule": "improper_omission",
    "test_cases": [
        {
            "id": "missing_third_power_chord",
            "description": "Acorde sin 3ª (solo fundamental y 5ª) - Debe detectar ERROR",
            "expected": "error",
            "chord1": {
                "S": "G4",
                "A": "C4",
                "T": "G3",
                "B": "C3",
                "root": "C",
                "quality": "major",
                "degree": "I"
            },
            "chord2": {
                "S": "A4",
                "A": "D4",
                "T": "F3",
                "B": "D3",
                "root": "D",
                "quality": "minor",
                "degree": "ii"
            },
            "notes": "Chord1 tiene C, G, C, G - falta la 3ª (E). Error en chord1."
        },
        {
            "id": "complete_triad_ok",
            "description": "Triada completa (1-3-5) - NO debe detectar error",
            "expected": "ok",
            "chord1": {
                "S": "G4",
                "A": "E4",
                "T": "C4",
                "B": "C3",
                "root": "C",
                "quality": "major",
                "degree": "I"
            },
            "chord2": {
                "S": "A4",
                "A": "F4",
                "T": "D4",
                "B": "D3",
                "root": "D",
                "quality": "minor",
                "degree": "ii"
            },
            "notes": "Ambos acordes tienen 1-3-5, ningún factor faltante"
        },
        {
            "id": "missing_fifth_ok",
            "description": "Triada sin 5ª pero con 1-3 - NO debe detectar error",
            "expected": "ok",
            "chord1": {
                "S": "E4",
                "A": "C4",
                "T": "E3",
                "B": "C3",
                "root": "C",
                "quality": "major",
                "degree": "I"
            },
            "chord2": {
                "S": "A4",
                "A": "F4",
                "T": "D4",
                "B": "D3",
                "root": "D",
                "quality": "minor",
                "degree": "ii"
            },
            "notes": "Chord1 tiene C, E, E, C - falta la 5ª (G), pero la 5ª es prescindible"
        },
        {
            "id": "doubled_root_third_ok",
            "description": "Acorde con fundamental duplicada y 3ª - NO debe detectar error",
            "expected": "ok",
            "chord1": {
                "S": "G4",
                "A": "E4",
                "T": "C4",
                "B": "C3",
                "root": "C",
                "quality": "major",
                "degree": "I"
            },
            "chord2": {
                "S": "A4",
                "A": "E4",
                "T": "C4",
                "B": "A2",
                "root": "A",
                "quality": "minor",
                "degree": "vi"
            },
            "notes": "Chord2: A tiene A, E, C, A - 1-3-5 presente, fundamental duplicada OK"
        },
        {
            "id": "missing_third_chord2",
            "description": "Segundo acorde sin 3ª - Debe detectar ERROR en chord2",
            "expected": "error",
            "chord1": {
                "S": "G4",
                "A": "E4",
                "T": "C4",
                "B": "C3",
                "root": "C",
                "quality": "major",
                "degree": "I"
            },
            "chord2": {
                "S": "D5",
                "A": "A4",
                "T": "D4",
                "B": "D3",
                "root": "D",
                "quality": "minor",
                "degree": "ii"
            },
            "notes": "Chord2 tiene D, A, D, D - falta la 3ª (F)"
        }
    ]
}